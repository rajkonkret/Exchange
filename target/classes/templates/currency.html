<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Exchange</title>

</head>
<style>
    * {
    background-color: #828ce0
    }
     #listcur, .frm1, button {
        display: grid;
        justify-content: center;
        background-color: #828ce0;
        color: #ebae34;
    }
    input[type="text"] {
        background: #fff
    }




</style>
<body onload="myOnLoad()">
<p id="listcur">Å‚adowanie...</p>
<form class="frm1">
    First currency: <input type="text" class="frm1" name="fname" value="pln"><br>
    Second currency: <input type="text" name="lname" value="eur"><br><br>
    Value: <input type="text" name="lname" value="100"><br><br>
</form>
<div class="frm1">
    <p>Exchange</p>

    <button onclick="myFunction()">Do it!</button>
</div>


<p id="demo"></p>

<script>
function myFunction() {
const url = "https://exchange-app-raj.herokuapp.com/api/exchange";
var x = document.getElementById("frm1");
var text = "";
var text = x.elements[0].value;
var ob = { first: "usd", second: "pln", value: 100}
ob.first = text;
var text = x.elements[1].value;
ob.second = text;
var text = x.elements[2].value;
ob.value = text*1;
fetch(url, {
    method: "post",
    headers: {
    "Content-Type": "application/json"
    },
    body: JSON.stringify(ob)
    })
    .then(res => res.json())
    .then(res => {
    document.getElementById("demo").innerHTML = res;
    })
}
function myOnLoad(){
const url = "https://exchange-app-raj.herokuapp.com/api/exchange";
    fetch(url)
    .then(res => res.json())
    .then(res => {
    document.getElementById("listcur").innerHTML ="";
    for (i = 0; i < res[0].rates.length; i++){
    document.getElementById("listcur").innerHTML += res[0].rates[i].code +" "
    }
    console.log(res);
    })
}




</script>
</body>
</html>